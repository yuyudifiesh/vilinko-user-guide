<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第一次使用用户引导</title>
    <meta name="color-scheme" content="light dark">
    <meta name="supported-color-schemes" content="light dark">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5C6BC0',
                        secondary: '#7E57C2',
                        accent: '#651FFF',
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .btn-mask {
                background-color: rgba(0, 0, 0, 0.05);
                transition: background-color 0.2s ease;
            }
            .btn-mask:hover {
                background-color: rgba(0, 0, 0, 0.1);
            }
            .start-btn-hover {
                transition: background-color 0.2s ease;
            }
            .slide-right-in {
                animation: slideRightIn 0.5s ease-out;
            }
            .slide-left-out {
                animation: slideLeftOut 0.5s ease-out;
            }
            .slide-left-in {
                animation: slideLeftIn 0.5s ease-out;
            }
            .slide-right-out {
                animation: slideRightOut 0.5s ease-out;
            }
            @keyframes slideRightIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideLeftOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(-100%); opacity: 0; }
            }
            @keyframes slideLeftIn {
                from { transform: translateX(-100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideRightOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
            /* 加载动画 */
            @keyframes spin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            .animate-spin {
                animation: spin 1s linear infinite;
            }
        }
    </style>
    <style>
        html, body {
            overflow: hidden;
            height: 100%;
            touch-action: none;
        }
        ::-webkit-scrollbar {
            display: none;
        }
        body {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        a {
            text-decoration: none;
            color: #6200ee;
        }
        /* 图片加载遮罩样式 */
        .img-loading-mask {
            position: absolute;
            inset: 0;
            background-color: rgba(255, 255, 255, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .img-container {
            position: relative;
            overflow: hidden;
        }
        /* 大图查看器样式 */
        .image-viewer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .image-viewer.active {
            opacity: 1;
            visibility: visible;
        }
        .image-viewer-content {
            max-width: 90%;
            max-height: 90%;
            position: relative;
        }
        .image-viewer img {
            max-width: 100%;
            max-height: 80vh;
            object-fit: contain;
        }
        .image-viewer-close {
            position: absolute;
            top: -40px;
            right: 0;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }
        .zoomable-img {
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        .zoomable-img:hover {
            transform: scale(1.02);
        }
    </style>
</head>
<body class="bg-white min-h-screen text-black flex flex-col">
    <div class="container mx-auto px-4 py-8 flex-grow flex flex-col justify-center">
        <div class="relative flex-grow flex items-center justify-center">
            <div id="slides-container" class="w-full overflow-hidden">
                <!-- 引导 -->
                <div class="slide min-h-[60vh] flex flex-col items-center justify-center px-4 absolute inset-0" data-index="0.5" style="transform: translateX(100%);">
                    <h2 class="text-[clamp(1.5rem,5vw,2.5rem)] font-bold text-center mb-8 text-black">欢迎使用<br>LightFrame</h2>
                    <p class="text-[clamp(1rem,3vw,1.25rem)] text-center text-black/80 max-w-2xl">
                        您将在这个页面熟悉 LightFrame 的页面，让我们开始吧！
                    </p>
                </div>
                <!-- 第一页 -->
                <div class="slide active min-h-[60vh] flex flex-col items-center justify-center px-4" data-index="0">
                    <h2 class="text-[clamp(1.5rem,5vw,2.5rem)] font-bold text-center mb-8 text-black">首页</h2>
                    <div class="max-w-lg w-full mb-8 img-container">
                        <!-- 加载遮罩 -->
                        <div class="img-loading-mask">
                            <i class="fa fa-circle-o-notch fa-spin text-4xl text-gray-400 mb-2"></i>
                            <p class="text-gray-500">加载中...</p>
                        </div>
                        <img src="source/img/yindao/1shouye1.png" alt="首页介绍" class="w-full h-auto rounded-xl zoomable-img" onclick="openImageViewer(this)" onload="hideLoadingMask(this)">
                    </div>
                    <p class="text-[clamp(1rem,3vw,1.25rem)] text-left text-black/80 max-w-2xl">
                        这里是应用的首页，您可以点击左上角菜单查看侧栏完整信息，也可以在仪表盘进行快捷操作。我们将在后续了解详细内容。<br>在页面的右上角，您可以看到三个控件，分别为更多选项、最小化和关闭。
                    </p>
                </div>

                <!-- 第二页 -->
                <div class="slide min-h-[60vh] flex flex-col items-center justify-center px-4 absolute inset-0" data-index="1" style="transform: translateX(100%);">
                    <h2 class="text-[clamp(1.5rem,5vw,2.5rem)] font-bold text-center mb-8 text-black">时间组件</h2>
                    <div class="max-w-lg w-full mb-8 img-container">
                        <!-- 加载遮罩 -->
                        <div class="img-loading-mask">
                            <i class="fa fa-circle-o-notch fa-spin text-4xl text-gray-400 mb-2"></i>
                            <p class="text-gray-500">加载中...</p>
                        </div>
                        <img src="source/img/yindao/2shijian.png" alt="时间管理" class="w-full h-auto rounded-xl zoomable-img" onclick="openImageViewer(this)" onload="hideLoadingMask(this)">
                    </div>
                    <p class="text-[clamp(1rem,3vw,1.25rem)] text-left text-black/80 max-w-2xl">
                        您可以在此页面中将日历本组件或者时间显示组件加入到您的电脑桌面上。<br>更多组件敬请期待 ~
                    </p>
                </div>

                <!-- 第三页 -->
                <div class="slide min-h-[60vh] flex flex-col items-center justify-center px-4 absolute inset-0" data-index="2" style="transform: translateX(100%);">
                    <h2 class="text-[clamp(1.5rem,5vw,2.5rem)] font-bold text-center mb-8 text-black">常用组件</h2>
                    <div class="max-w-lg w-full mb-8 img-container">
                        <!-- 加载遮罩 -->
                        <div class="img-loading-mask">
                            <i class="fa fa-circle-o-notch fa-spin text-4xl text-gray-400 mb-2"></i>
                            <p class="text-gray-500">加载中...</p>
                        </div>
                        <img src="source/img/yindao/3changyong.png" alt="常用功能" class="w-full h-auto rounded-xl zoomable-img" onclick="openImageViewer(this)" onload="hideLoadingMask(this)">
                    </div>
                    <p class="text-[clamp(1rem,3vw,1.25rem)] text-left text-black/80 max-w-2xl">
                        我们提供了一些开箱即用的组件库来满足用户快速布局的需要，您只需要选择您想要的组件并添加即可。
                    </p>
                </div>

                <!-- 第四页 -->
                <div class="slide min-h-[60vh] flex flex-col items-center justify-center px-4 absolute inset-0" data-index="3" style="transform: translateX(100%);">
                    <h2 class="text-[clamp(1.5rem,5vw,2.5rem)] font-bold text-center mb-8 text-black">自定义卡片</h2>
                    <div class="max-w-lg w-full mb-8 img-container">
                        <!-- 加载遮罩 -->
                        <div class="img-loading-mask">
                            <i class="fa fa-circle-o-notch fa-spin text-4xl text-gray-400 mb-2"></i>
                            <p class="text-gray-500">加载中...</p>
                        </div>
                        <img src="source/img/yindao/4zidingyi.png" alt="个性化设置" class="w-full h-auto rounded-xl zoomable-img" onclick="openImageViewer(this)" onload="hideLoadingMask(this)">
                    </div>
                    <p class="text-[clamp(1rem,3vw,1.25rem)] text-left text-black/80 max-w-2xl">
                        对于喜欢个性化定制的用户，我们提供了一套自定义功能，您可以在首页查找自定义功能的引导服务。
                    </p>
                </div>

                <!-- 第五页 -->
                <div class="slide min-h-[60vh] flex flex-col items-center justify-center px-4 absolute inset-0" data-index="4" style="transform: translateX(100%);">
                    <h2 class="text-[clamp(1.5rem,5vw,2.5rem)] font-bold text-center mb-8 text-black">测试功能</h2>
                    <div class="max-w-lg w-full mb-8 img-container">
                        <!-- 加载遮罩 -->
                        <div class="img-loading-mask">
                            <i class="fa fa-circle-o-notch fa-spin text-4xl text-gray-400 mb-2"></i>
                            <p class="text-gray-500">加载中...</p>
                        </div>
                        <img src="source/img/yindao/5gengduo.png" alt="更多精彩" class="w-full h-auto rounded-xl zoomable-img" onclick="openImageViewer(this)" onload="hideLoadingMask(this)">
                    </div>
                    <p class="text-[clamp(1rem,3vw,1.25rem)] text-center text-black/80 max-w-2xl">
                        这里是测试功能和一些说明。<br><br>引导结束！
                    </p>
                    <a href="create-a-normal.html" id="start-btn" class="mt-8 bg-primary text-white font-bold py-3 px-8 rounded-full start-btn-hover no-underline" onclick="window.location.href='create-a-normal.html'; return false;">
                        创建第一个组件
                    </a>
                </div>
            </div>

            <!-- 左箭头按钮 -->
            <button id="prev-btn" class="btn-mask absolute left-4 top-1/2 -translate-y-1/2 text-white w-12 h-12 rounded-full flex items-center justify-center">
                <i class="fa fa-angle-left text-2xl"></i>
            </button>

            <!-- 右箭头按钮 -->
            <button id="next-btn" class="btn-mask absolute right-4 top-1/2 -translate-y-1/2 text-white w-12 h-12 rounded-full flex items-center justify-center">
                <i class="fa fa-angle-right text-2xl"></i>
            </button>
        </div>

        <!-- 指示器 -->
        <div class="flex justify-center mt-8 space-x-2">
            <button class="indicator w-3 h-3 rounded-full bg-gray-800 opacity-100" data-index="0"></button>
            <button class="indicator w-3 h-3 rounded-full bg-gray-400 opacity-70" data-index="1"></button>
            <button class="indicator w-3 h-3 rounded-full bg-gray-400 opacity-70" data-index="2"></button>
            <button class="indicator w-3 h-3 rounded-full bg-gray-400 opacity-70" data-index="3"></button>
            <button class="indicator w-3 h-3 rounded-full bg-gray-400 opacity-70" data-index="4"></button>
            <button class="indicator w-3 h-3 rounded-full bg-gray-400 opacity-70" data-index="5"></button>
        </div>
    </div>

    <!-- img.webview -->
    <div id="imageViewer" class="image-viewer" onclick="closeImageViewer(event)">
        <div class="image-viewer-content">
            <span class="image-viewer-close" onclick="closeImageViewer(event)"><i class="fa fa-times"></i></span>
            <img id="viewerImage" src="" alt="大图查看" draggable="false">
        </div>
    </div>

    <script>
        // 图片预加载
        function preloadImages() {
            const imageUrls = [
                'source/img/yindao/1shouye1.png',
                'source/img/yindao/2shijian.png',
                'source/img/yindao/3changyong.png',
                'source/img/yindao/4zidingyi.png',
                'source/img/yindao/5gengduo.png'
            ];
            
            // 预加载
            imageUrls.forEach(url => {
                const img = new Image();
                img.src = url;
            });
        }
        
        // 隐藏加载遮罩
        function hideLoadingMask(imgElement) {
            const loadingMask = imgElement.parentElement.querySelector('.img-loading-mask');
            if (loadingMask) {
                loadingMask.style.opacity = '0';
                setTimeout(() => {
                    loadingMask.style.visibility = 'hidden';
                }, 300);
            }
        }

        // 打开大图查看器
        function openImageViewer(imgElement) {
            const viewer = document.getElementById('imageViewer');
            const viewerImg = document.getElementById('viewerImage');
            
            viewerImg.src = imgElement.src;
            viewerImg.alt = imgElement.alt;
            
            viewer.classList.add('active');
            
            document.body.style.overflow = 'hidden';
            
            viewerImg.onmousedown = function(e) {
                e.preventDefault();
            };
            viewerImg.ondragstart = function(e) {
                e.preventDefault();
            };
        }

        // 关闭大图查看器
        function closeImageViewer(event) {
            const viewer = document.getElementById('imageViewer');
            const viewerContent = viewer.querySelector('.image-viewer-content');
            
            if (event.target === viewer || event.target.closest('.image-viewer-close')) {
                viewer.classList.remove('active');
                document.body.style.overflow = 'auto';
            }
        }
        
        window.addEventListener('DOMContentLoaded', () => {
            preloadImages();
        });
        
        // 获取DOM元素
        const slides = document.querySelectorAll('.slide');
        const indicators = document.querySelectorAll('.indicator');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const startBtn = document.getElementById('start-btn');
        
        let currentIndex = 0;
        const totalSlides = slides.length;
        let isAnimating = false;
        
        // 初始化
        function init() {
            // 设置初始位置和显示状态
            slides.forEach((slide, index) => {
                slide.style.transition = 'transform 0.5s ease-out';
                if (index === 0) {
                    slide.style.transform = 'translateX(0)';
                    slide.classList.add('active');
                } else {
                    slide.style.transform = 'translateX(100%)';
                    slide.classList.remove('active');
                }
            });
            
            prevBtn.style.display = currentIndex === 0 ? 'none' : 'flex';
        }
        
        // 更新滑动显示 - 左右滑动
        function updateSlideDisplay(direction = 'next') {
            if (isAnimating) return;
            isAnimating = true;
            
            const oldIndex = currentIndex;
            
            // 更新索引
            if (direction === 'next' && currentIndex < totalSlides - 1) {
                currentIndex++;
            } else if (direction === 'prev' && currentIndex > 0) {
                currentIndex--;
            } else {
                isAnimating = false;
                return;
            }
            
            // 准备下一张幻灯片
            const nextSlide = slides[currentIndex];
            nextSlide.style.transform = direction === 'next' ? 'translateX(100%)' : 'translateX(-100%)';
            nextSlide.classList.add('active');
            
            void nextSlide.offsetWidth;
            
            slides[oldIndex].style.transform = direction === 'next' ? 'translateX(-100%)' : 'translateX(100%)';
            
            nextSlide.style.transform = 'translateX(0)';
            
            // 更新指示器
            indicators.forEach((indicator, index) => {
                if (index === currentIndex) {
                    indicator.classList.add('bg-gray-800', 'opacity-100');
                    indicator.classList.remove('bg-gray-400', 'opacity-70');
                } else {
                    indicator.classList.add('bg-gray-400', 'opacity-70');
                    indicator.classList.remove('bg-gray-800', 'opacity-100');
                }
            });
            
            prevBtn.style.display = currentIndex === 0 ? 'none' : 'flex';
            
            setTimeout(() => {
                slides.forEach((slide, index) => {
                    if (index !== currentIndex && index !== oldIndex) {
                        if (index > currentIndex) {
                            slide.style.transform = 'translateX(100%)';
                        } else {
                            slide.style.transform = 'translateX(-100%)';
                        }
                        slide.classList.remove('active');
                    }
                });
                
                slides[oldIndex].classList.remove('active');
                isAnimating = false;
            }, 500); // 动画持续时间
        }
        
        // 直接跳转到指定页面
        function goToSlide(index) {
            if (isAnimating || index === currentIndex || index < 0 || index >= totalSlides) return;
            
            isAnimating = true;
            const oldIndex = currentIndex;
            currentIndex = index;
            const direction = index > oldIndex ? 'next' : 'prev';
            
            slides.forEach((slide, i) => {
                slide.style.transition = 'transform 0.5s ease-out';
                
                if (i === currentIndex) {
                    slide.style.transform = direction === 'next' ? 'translateX(100%)' : 'translateX(-100%)';
                    slide.classList.add('active');
                } else if (i === oldIndex) {
                    slide.classList.add('active');
                } else {
                    slide.style.transform = i > currentIndex ? 'translateX(100%)' : 'translateX(-100%)';
                    slide.classList.remove('active');
                }
            });
            
            void slides[currentIndex].offsetWidth;

            slides[oldIndex].style.transform = direction === 'next' ? 'translateX(-100%)' : 'translateX(100%)';
            
            slides[currentIndex].style.transform = 'translateX(0)';
            
            indicators.forEach((indicator, i) => {
                if (i === currentIndex) {
                    indicator.classList.add('bg-gray-800', 'opacity-100');
                    indicator.classList.remove('bg-gray-400', 'opacity-70');
                } else {
                    indicator.classList.add('bg-gray-400', 'opacity-70');
                    indicator.classList.remove('bg-gray-800', 'opacity-100');
                }
            });
            
            prevBtn.style.display = currentIndex === 0 ? 'none' : 'flex';
            
            setTimeout(() => {
                slides.forEach((slide, i) => {
                    if (i !== currentIndex) {
                        slide.style.transform = i > currentIndex ? 'translateX(100%)' : 'translateX(-100%)';
                        slide.classList.remove('active');
                    }
                });
                isAnimating = false;
            }, 500);
        }
        
        // 初始化
        init();
        
        // 下一张
        nextBtn.addEventListener('click', () => {
            updateSlideDisplay('next');
        });
        
        // 上一张
        prevBtn.addEventListener('click', () => {
            updateSlideDisplay('prev');
        });
        
        // 点击指示器跳转到对应页面
        indicators.forEach((indicator, index) => {
            indicator.addEventListener('click', () => {
                goToSlide(index);
            });
        });
        
        // 键盘导航
        document.addEventListener('keydown', (e) => {
            if (isAnimating) return;
            
            if (e.key === 'ArrowRight') {
                updateSlideDisplay('next');
            } else if (e.key === 'ArrowLeft') {
                updateSlideDisplay('prev');
            } else if (e.key === 'Escape') {
                // ESC键关闭大图查看器
                const viewer = document.getElementById('imageViewer');
                if (viewer.classList.contains('active')) {
                    viewer.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            }
        });
        
        // 防止触摸滑动
        document.addEventListener('touchmove', (e) => {
            e.preventDefault();
        }, { passive: false });
    </script>
</body>
</html>